@import "tailwindcss";
@import url("https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap");
@plugin "daisyui" {
  themes: all;
}
@plugin "@tailwindcss/typography";

@theme {
  --font-mono: "JetBrains Mono", "Fira Code", "IBM Plex Mono", "Source Code Pro", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
}

body {
  @apply m-0;
  font-family: "Manrope", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
    "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",
    monospace;
}

/* Prose styling for markdown */
.prose {
  @apply text-base;
  font-family: "Manrope", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
    "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
}

.prose h1 {
  @apply text-3xl font-bold mt-8 mb-4;
}

.prose h2 {
  @apply text-2xl font-bold mt-6 mb-3;
}

.prose h3 {
  @apply text-xl font-bold mt-4 mb-2;
}

.prose p {
  @apply mb-4;
}

.prose ul, .prose ol {
  @apply mb-4 ml-6;
}

.prose li {
  @apply mb-2;
}

.prose code {
  @apply bg-base-200 px-1 py-0.5 rounded text-sm;
}

.prose pre {
  @apply bg-base-200 p-4 rounded-lg overflow-x-auto mb-4;
}

.prose pre code {
  @apply bg-transparent p-0;
}

.prose blockquote {
  @apply border-l-4 border-primary pl-4 italic my-4;
}

.prose a {
  @apply text-primary hover:underline;
}

/* Inline preview tweaks for the editor */
.markdown-inline-preview {
  @apply prose-sm max-w-none leading-relaxed;
}

.markdown-inline-preview p {
  @apply mb-4;
}

/* Live Preview Editor Styles */
.editor-lines-container {
  @apply min-h-full;
}

.editor-line {
  @apply min-h-[1.5em] whitespace-pre-wrap break-words;
  @apply focus:outline-none;
}

.editor-line-focused {
  /* Focused lines still render tokens, syntax markers are overlaid */
  @apply relative;
}

.editor-line-focused:focus {
  @apply outline-none;
}

.editor-line-rendered {
  /* Line height matches textarea */
}

/* Contenteditable styling */
.editor-line[contenteditable="true"] {
  @apply cursor-text;
}

.editor-line[contenteditable="true"]:focus {
  @apply outline-none;
}

/* Ensure syntax markers don't interfere with editing */
.editor-line-focused .editor-syntax-marker {
  @apply pointer-events-none;
  @apply select-none;
}

/* Syntax markers - shown when line is focused */
.editor-syntax-marker {
  @apply text-base-content/40 font-mono;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
  font-size: inherit; /* Inherit font size from parent (header, paragraph, etc.) */
  user-select: none;
  transition: opacity 0.1s ease-in-out;
}

.editor-line-empty {
  @apply text-base-content/50;
}

.editor-line-wrapper {
  @apply block;
}

/* Inline elements */
.editor-bold {
  @apply font-bold;
}

.editor-italic {
  @apply italic;
}

.editor-inline-code {
  @apply bg-base-200 px-1.5 py-0.5 rounded text-sm font-mono;
  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New", monospace;
}

.editor-link {
  @apply text-primary hover:underline cursor-pointer;
}

.editor-link-text {
  @apply text-primary;
}

.editor-strikethrough {
  @apply line-through;
}

/* Block elements */
.editor-header {
  @apply font-bold mb-2 mt-4;
  display: block !important;
  line-height: 1.2 !important;
}

.editor-line h1.editor-header-1,
.editor-line h2.editor-header-2,
.editor-line h3.editor-header-3,
.editor-line h4.editor-header-4,
.editor-line h5.editor-header-5,
.editor-line h6.editor-header-6 {
  font-size: inherit;
}

.editor-header-1 {
  @apply text-3xl;
  font-size: 1.875rem !important; /* Override parent font-size */
  line-height: 1.2 !important;
}

.editor-header-2 {
  @apply text-2xl;
  font-size: 1.5rem !important;
  line-height: 1.2 !important;
}

.editor-header-3 {
  @apply text-xl;
  font-size: 1.25rem !important;
  line-height: 1.2 !important;
}

.editor-header-4 {
  @apply text-lg;
  font-size: 1.125rem !important;
  line-height: 1.2 !important;
}

.editor-header-5 {
  @apply text-base;
  font-size: 1rem !important;
  line-height: 1.2 !important;
}

.editor-header-6 {
  @apply text-sm;
  font-size: 0.875rem !important;
  line-height: 1.2 !important;
}

.editor-list-item {
  @apply flex items-start mb-1;
}

.editor-list-marker {
  @apply mr-2 flex-shrink-0;
}

.editor-list-content {
  @apply flex-1;
}

.editor-list-unordered {
  @apply list-none;
}

.editor-list-ordered {
  @apply list-none;
}

.editor-blockquote {
  @apply flex items-start border-l-4 border-primary pl-4 italic my-2;
}

.editor-blockquote-marker {
  @apply mr-2 flex-shrink-0;
}

.editor-blockquote-content {
  @apply flex-1;
}

.editor-hr {
  @apply border-t border-base-300 my-4;
}

.editor-paragraph {
  @apply mb-2;
}

.editor-line-code-fence {
  @apply font-mono text-sm bg-base-200 px-2 py-1 rounded;
  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New", monospace;
}

/* Commentable Content - Hover to comment on lines */
.commentable-content {
  @apply relative pr-10; /* Space for the right indicator */
}

.commentable-line {
  @apply relative py-0.5 pr-8 rounded-sm transition-colors flex items-start;
  min-height: 1.5em;
}

.commentable-line:hover {
  @apply bg-base-200/30;
}

.commentable-line.has-comments {
  @apply bg-warning/5;
}

.commentable-line.is-active {
  @apply bg-primary/10;
}

.commentable-line-content {
  @apply flex-1 min-w-0;
}

/* Right-side comment indicator */
.comment-indicator {
  @apply absolute right-0 top-1/2 -translate-y-1/2
         w-6 h-6 rounded-full flex items-center justify-center
         text-base-content/40
         cursor-pointer transition-all duration-150
         opacity-0 hover:opacity-100;
}

.comment-indicator:hover {
  @apply text-primary bg-primary/10;
}

.comment-indicator.visible {
  @apply opacity-100;
}

.comment-indicator.has-comments {
  @apply opacity-100 bg-warning text-warning-content;
}

.comment-indicator.has-comments:hover {
  @apply bg-warning/80;
}

.comment-indicator.is-open {
  @apply bg-primary text-primary-content opacity-100;
}

.comment-indicator .comment-count {
  @apply text-xs font-bold;
}

/* Comment modal/drawer customization */
.modal-box {
  @apply max-h-[80vh];
}

/* Inline markdown rendering for single lines */
.inline-markdown p {
  @apply m-0 inline;
}

.inline-markdown h1,
.inline-markdown h2,
.inline-markdown h3,
.inline-markdown h4,
.inline-markdown h5,
.inline-markdown h6 {
  @apply font-bold m-0;
}

.inline-markdown h1 { @apply text-2xl; }
.inline-markdown h2 { @apply text-xl; }
.inline-markdown h3 { @apply text-lg; }

.inline-markdown ul,
.inline-markdown ol {
  @apply m-0 pl-4;
}

.inline-markdown li {
  @apply m-0;
}

.inline-markdown code {
  @apply bg-base-200 px-1 py-0.5 rounded text-sm;
}

.inline-markdown blockquote {
  @apply border-l-2 border-primary pl-2 m-0 italic;
}

.inline-markdown a {
  @apply text-primary hover:underline;
}

/* File Tree Styles */
.file-tree {
  @apply flex flex-col h-full;
}

.file-tree-item {
  @apply flex items-center gap-2 px-2 py-1 rounded hover:bg-base-300 transition-colors;
}

.file-tree-item.active {
  @apply bg-primary/20;
}

.file-tree-item.dragging {
  @apply opacity-50;
}

.file-tree-folder {
  @apply font-medium;
}

.file-tree-note {
  @apply text-sm;
}

/* Context Menu Styles */
.context-menu {
  @apply fixed z-50 bg-base-200 border border-base-300 rounded-lg shadow-lg py-1 min-w-[180px];
}

/* Drag Overlay */
.drag-overlay {
  @apply opacity-50 bg-base-200 p-2 rounded shadow-lg;
}

/* Right Sidebar Styles */
.right-sidebar {
  @apply fixed right-0 top-[4rem] bottom-0 w-80 bg-base-200 border-l border-base-300 z-30;
}

/* Ensure main content doesn't overlap with right sidebar on large screens */
@media (min-width: 1024px) {
  .main-content-with-sidebar {
    @apply mr-80;
  }
}

/* Right sidebar tab content scrolling */
.right-sidebar-tab-content {
  @apply flex-1 overflow-hidden flex flex-col;
}

/* CodeMirror Editor Styles */
.cm-editor {
  @apply font-mono;
}

.cm-editor .cm-content {
  @apply text-base-content;
}

.cm-editor.cm-focused {
  @apply border-primary;
}

/* CodeMirror markdown syntax highlighting */
.cm-editor .cm-header {
  @apply font-bold text-base-content;
}

.cm-editor .cm-link {
  @apply text-primary;
}

.cm-editor .cm-link:hover {
  @apply underline;
}

.cm-editor .cm-strong {
  @apply font-bold text-base-content;
}

.cm-editor .cm-emphasis {
  @apply italic text-base-content;
}

.cm-editor .cm-strikethrough {
  @apply line-through text-base-content;
}

.cm-editor .cm-quote {
  @apply italic text-base-content/80;
}

.cm-editor .cm-monospace,
.cm-editor .cm-codeMark {
  @apply bg-base-200 px-1.5 py-0.5 rounded text-sm;
}

.cm-editor .cm-listMark,
.cm-editor .cm-headingMark {
  @apply text-base-content/70;
}

/* Inline comments panel specific styles */
.inline-comments-panel {
  @apply flex flex-col h-full;
}

.inline-comments-panel-header {
  @apply flex items-center justify-between p-4 border-b border-base-300 bg-base-200/50;
}

.inline-comments-panel-line-preview {
  @apply px-4 py-2 bg-base-300/30 border-b border-base-300;
}

.inline-comments-panel-comments {
  @apply flex-1 overflow-y-auto p-4 space-y-4;
}

.inline-comments-panel-input {
  @apply p-4 border-t border-base-300 bg-base-200/30;
}

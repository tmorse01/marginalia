@import "tailwindcss";
@import url("https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap");
@plugin "daisyui" {
  themes: all;
}
@plugin "@tailwindcss/typography";

@theme {
  --font-mono: "JetBrains Mono", "Fira Code", "IBM Plex Mono", "Source Code Pro", ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
}

body {
  @apply m-0;
  font-family: "Manrope", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
    "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New",
    monospace;
}

/* Prose styling for markdown */
.prose {
  @apply text-base;
  font-family: "Manrope", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
    "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
}

.prose h1 {
  @apply text-3xl font-bold mt-8 mb-4;
}

.prose h2 {
  @apply text-2xl font-bold mt-6 mb-3;
}

.prose h3 {
  @apply text-xl font-bold mt-4 mb-2;
}

.prose p {
  @apply mb-4;
}

.prose ul, .prose ol {
  @apply mb-4 ml-6;
}

.prose li {
  @apply mb-2;
}

.prose code {
  @apply bg-base-200 px-1 py-0.5 rounded text-sm;
}

.prose pre {
  @apply bg-base-200 p-4 rounded-lg overflow-x-auto mb-4;
}

.prose pre code {
  @apply bg-transparent p-0;
}

.prose blockquote {
  @apply border-l-4 border-primary pl-4 italic my-4;
}

.prose a {
  @apply text-primary hover:underline;
}

/* Inline preview tweaks for the editor */
.markdown-inline-preview {
  @apply prose-sm max-w-none leading-relaxed;
}

.markdown-inline-preview p {
  @apply mb-4;
}

/* Live Preview Editor Styles */
.editor-lines-container {
  @apply min-h-full;
}

.editor-line {
  @apply min-h-[1.5em] whitespace-pre-wrap break-words;
}

.editor-line-focused {
  @apply font-mono;
  font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
}

.editor-line-rendered {
  /* Line height matches textarea */
}

.editor-line-empty {
  @apply text-base-content/50;
}

.editor-line-wrapper {
  @apply block;
}

/* Inline elements */
.editor-bold {
  @apply font-bold;
}

.editor-italic {
  @apply italic;
}

.editor-inline-code {
  @apply bg-base-200 px-1.5 py-0.5 rounded text-sm font-mono;
  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New", monospace;
}

.editor-link {
  @apply text-primary hover:underline cursor-pointer;
}

.editor-strikethrough {
  @apply line-through;
}

/* Block elements */
.editor-header {
  @apply font-bold mb-2 mt-4;
}

.editor-header-1 {
  @apply text-3xl;
}

.editor-header-2 {
  @apply text-2xl;
}

.editor-header-3 {
  @apply text-xl;
}

.editor-header-4 {
  @apply text-lg;
}

.editor-header-5 {
  @apply text-base;
}

.editor-header-6 {
  @apply text-sm;
}

.editor-list-item {
  @apply flex items-start mb-1;
}

.editor-list-marker {
  @apply mr-2 flex-shrink-0;
}

.editor-list-content {
  @apply flex-1;
}

.editor-list-unordered {
  @apply list-none;
}

.editor-list-ordered {
  @apply list-none;
}

.editor-blockquote {
  @apply flex items-start border-l-4 border-primary pl-4 italic my-2;
}

.editor-blockquote-marker {
  @apply mr-2 flex-shrink-0;
}

.editor-blockquote-content {
  @apply flex-1;
}

.editor-hr {
  @apply border-t border-base-300 my-4;
}

.editor-paragraph {
  @apply mb-2;
}

.editor-line-code-fence {
  @apply font-mono text-sm bg-base-200 px-2 py-1 rounded;
  font-family: source-code-pro, Menlo, Monaco, Consolas, "Courier New", monospace;
}

/* Commentable Content - Hover to comment on lines */
.commentable-content {
  @apply relative pr-10; /* Space for the right indicator */
}

.commentable-line {
  @apply relative py-0.5 pr-8 rounded-sm transition-colors flex items-start;
  min-height: 1.5em;
}

.commentable-line:hover {
  @apply bg-base-200/30;
}

.commentable-line.has-comments {
  @apply bg-warning/5;
}

.commentable-line.is-active {
  @apply bg-primary/10;
}

.commentable-line-content {
  @apply flex-1 min-w-0;
}

/* Right-side comment indicator */
.comment-indicator {
  @apply absolute right-0 top-1/2 -translate-y-1/2
         w-6 h-6 rounded-full flex items-center justify-center
         text-base-content/40
         cursor-pointer transition-all duration-150
         opacity-0 hover:opacity-100;
}

.comment-indicator:hover {
  @apply text-primary bg-primary/10;
}

.comment-indicator.visible {
  @apply opacity-100;
}

.comment-indicator.has-comments {
  @apply opacity-100 bg-warning text-warning-content;
}

.comment-indicator.has-comments:hover {
  @apply bg-warning/80;
}

.comment-indicator.is-open {
  @apply bg-primary text-primary-content opacity-100;
}

.comment-indicator .comment-count {
  @apply text-xs font-bold;
}

/* Comment Popover - Desktop (right side) */
.comment-popover {
  @apply bg-base-100 rounded-lg shadow-xl border border-base-300 overflow-hidden;
  width: 320px;
  max-width: calc(100vw - 2rem);
}

.comment-popover-right {
  @apply absolute z-50;
  top: 50%;
  left: calc(100% + 0.75rem);
  transform: translateY(-50%);
}

/* Adjust if popover would go off screen */
@media (max-width: 1024px) {
  .comment-popover-right {
    left: auto;
    right: 0;
    transform: translateY(-50%) translateX(100%);
  }
}

/* Comment Popover - Mobile (bottom sheet) */
.comment-popover-bottom {
  @apply rounded-t-2xl rounded-b-none w-full max-h-[70vh];
}

/* Slide up animation for mobile */
@keyframes slide-up {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slide-up 0.2s ease-out;
}

/* Inline markdown rendering for single lines */
.inline-markdown p {
  @apply m-0 inline;
}

.inline-markdown h1,
.inline-markdown h2,
.inline-markdown h3,
.inline-markdown h4,
.inline-markdown h5,
.inline-markdown h6 {
  @apply font-bold m-0;
}

.inline-markdown h1 { @apply text-2xl; }
.inline-markdown h2 { @apply text-xl; }
.inline-markdown h3 { @apply text-lg; }

.inline-markdown ul,
.inline-markdown ol {
  @apply m-0 pl-4;
}

.inline-markdown li {
  @apply m-0;
}

.inline-markdown code {
  @apply bg-base-200 px-1 py-0.5 rounded text-sm;
}

.inline-markdown blockquote {
  @apply border-l-2 border-primary pl-2 m-0 italic;
}

.inline-markdown a {
  @apply text-primary hover:underline;
}
